<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DiagnÃ³stico Mental</title>

  <!-- PIXEL E TRACK OTIMIZADO -->
  <script async defer src="https://cdn.utmify.com.br/scripts/utms/latest.js" 
    data-utmify-prevent-xcod-sck 
    data-utmify-prevent-subids></script>

  <script>
    (function() {
      const pixelId = "68c8c474648bfb224dfe38db";
      window.pixelId = pixelId;
      const s = document.createElement("script");
      s.src = "https://cdn.utmify.com.br/scripts/pixel/pixel.js";
      s.async = true;
      s.defer = true;
      document.head.appendChild(s);
    })();
  </script>

  <style>
    body {
      background: #0f0f0f;
      color: #fff;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      flex-direction: column;
      min-height: 100vh;
      text-align: center;
    }
    .quiz-box {
      background: #1a1a1a;
      padding: 30px;
      border-radius: 10px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 0 20px rgba(255, 0, 0, 0.4);
    }
    h1, h2, p {
      text-align: center;
    }
    button {
      background: linear-gradient(180deg, #ff1a1a, #800000);
      color: #fff;
      padding: 14px;
      width: 100%;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 20px;
    }
    .option {
      padding: 12px;
      background: #292929;
      border: 1px solid #ff1a1a;
      border-radius: 6px;
      margin: 10px 0;
      cursor: pointer;
      text-align: center;
    }
    .option:hover {
      background: #3a3a3a;
    }
    .progress {
      background: #333;
      border-radius: 6px;
      overflow: hidden;
      height: 10px;
      margin-bottom: 20px;
    }
    .bar {
      height: 100%;
      width: 0;
      background: #ff1a1a;
      transition: .4s;
    }
    #score-display {
      margin-top: 10px;
      font-weight: bold;
      font-size: 1.1rem;
      color: #ffd700;
    }
    canvas#confetti {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 999;
    }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>

  <div class="quiz-box" id="quiz-screen">
    <h1>VOCÃŠ TEM O CONTROLE OU Ã‰ CONTROLADO?</h1>
    <p style="margin-bottom:20px;">Responda com honestidade brutal. Cada escolha revela mais do que vocÃª imagina.</p>
    <div class="progress"><div id="progress-bar" class="bar"></div></div>
    <h2 id="question"></h2>
    <div id="options"></div>
    <div id="score-display">PontuaÃ§Ã£o: 0 pontos</div>
  </div>

  <!-- ðŸŽ§ ÃUDIOS CATBOX -->
  <audio id="sound-click" preload="auto">
    <source src="https://files.catbox.moe/k1svs3.mp3" type="audio/mp3">
  </audio>
  <audio id="sound-spin" preload="auto">
    <source src="https://files.catbox.moe/7bonqg.mp3" type="audio/mp3">
  </audio>
  <audio id="sound-final" preload="auto">
    <source src="https://files.catbox.moe/gangvk.mp3" type="audio/mp3">
  </audio>

  <script>
    const questions = [
      {q: "VocÃª jÃ¡ brochou e ficou com isso martelando na cabeÃ§a por dias?", o: ["Nunca", "Uma vez sÃ³", "Algumas vezes", "Perdi as contas"]},
      {q: "VocÃª sente que perdeu o controle da sua prÃ³pria mente?", o: ["NÃ£o", "Pouco", "Sim", "Completamente"]},
      {q: "Na hora H, sua mente jÃ¡ te sabotou?", o: ["Nunca", "Uma vez", "Algumas vezes", "Quase sempre"]},
      {q: "Tu jÃ¡ evitou transar pra nÃ£o passar vergonha?", o: ["NÃ£o", "Raramente", "Frequentemente", "Sempre"]},
      {q: "VocÃª depende de estÃ­mulos externos pra se sentir capaz?", o: ["NÃ£o", "Ã€s vezes", "Com frequÃªncia", "Sempre"]},
      {q: "Quanto do seu dia Ã© dominado por ansiedade silenciosa?", o: ["Quase nada", "Um pouco", "Metade", "Quase tudo"]},
      {q: "VocÃª sente que jÃ¡ perdeu oportunidades por falta de coragem?", o: ["Nunca", "Algumas", "Muitas", "Quase todas"]},
      {q: "Se sua mente fosse uma arma, ela te protegeria ou te sabotaria?", o: ["Sempre protege", "Ã€s vezes protege", "Mais sabota", "Sempre sabota"]},
      {q: "VocÃª tem medo de fracassar a ponto de nem tentar?", o: ["NÃ£o", "Pouco", "Sim", "Quase sempre"]},
      {q: "Se existisse um mÃ©todo discreto e direto para dominar sua confianÃ§a, vocÃª usaria?", o: ["Talvez", "Provavelmente", "Com certeza", "IMEDIATAMENTE"]}
    ];

    let current = 0, score = 0;

    function showQuestion() {
      const q = questions[current];
      document.getElementById("question").innerText = q.q;
      const optDiv = document.getElementById("options");
      optDiv.innerHTML = "";
      q.o.forEach((opt, i) => {
        const btn = document.createElement("div");
        btn.className = "option";
        btn.innerText = opt;
        btn.onclick = () => {
          document.getElementById("sound-click").play();
          nextQuestion(i);
        };
        optDiv.appendChild(btn);
      });
      document.getElementById("progress-bar").style.width = ((current) / questions.length * 100) + "%";
    }

    function nextQuestion(choice) {
      const points = (choice + 1) * 10;
      score += points;
      document.getElementById("score-display").innerText = `+${points} pontos! Total: ${score} pontos`;
      current++;
      if (current < questions.length) {
        setTimeout(() => showQuestion(), 300);
      } else {
        setTimeout(() => showResult(), 500);
      }
    }

    function showResult() {
      const box = document.getElementById("quiz-screen");
      box.innerHTML = `
        <h2>Resultado do DiagnÃ³stico</h2>
        <p style="margin-bottom:20px;">
          ${
            score < 120 ? "VocÃª ainda mantÃ©m certo controle. Mas as rachaduras jÃ¡ comeÃ§aram." :
            score < 180 ? "VocÃª estÃ¡ Ã  beira de um colapso emocional. A dÃºvida te domina." :
            "VocÃª perdeu o controle. Agora sÃ³ uma reprogramaÃ§Ã£o completa pode te salvar."
          }
        </p>
        <div style="text-align:center;margin:30px 0;">
          <strong>ðŸŽ¯ Gire a roleta e receba a sua chance de dominar sua mente.</strong>
          <br><br>
          <button onclick="spinWheel()">ðŸŽ° GIRAR ROLETA</button>
          <div id="wheel-box" style="margin-top:30px;"></div>
        </div>
      `;
    }

    function spinWheel() {
      document.getElementById("sound-spin").play();

      const wheelBox = document.getElementById("wheel-box");
      wheelBox.innerHTML = `
        <div style="position:relative;width:250px;height:250px;margin:auto;">
          <div style="position:absolute;top:-30px;left:50%;transform:translateX(-50%);
              width:0;height:0;border-left:15px solid transparent;border-right:15px solid transparent;
              border-bottom:30px solid #fff;"></div>
          <div style="width:100%;height:100%;display:flex;justify-content:center;align-items:center;">
            <svg id="svg-wheel" viewBox="0 0 100 100" style="width:100%;height:100%;transition:transform 4s ease-out; transform-origin: 50% 50%;">
              <g>
                <path d="M50,50 L50,0 A50,50 0 0,1 93.3,25 Z" fill="#4CAF50"></path>
                <text x="75" y="20" fill="#000" font-size="6" transform="rotate(18 75 20)">10%</text>
                <path d="M50,50 L93.3,25 A50,50 0 0,1 75,93.3 Z" fill="#FFEB3B"></path>
                <text x="82" y="60" fill="#000" font-size="6" transform="rotate(110 82 60)">25%</text>
                <path d="M50,50 L75,93.3 A50,50 0 0,1 6.7,75 Z" fill="#FF9800"></path>
                <text x="40" y="90" fill="#000" font-size="6" transform="rotate(180 40 90)">50%</text>
                <path d="M50,50 L6.7,75 A50,50 0 0,1 50,0 Z" fill="#F44336"></path>
                <text x="15" y="35" fill="#fff" font-size="6" transform="rotate(270 15 35)">90%</text>
              </g>
            </svg>
          </div>
        </div>
        <div id="final-msg" style="margin-top:20px;font-size:1.2rem;font-weight:bold;">Girando...</div>
      `;

      const svg = document.getElementById("svg-wheel");
      const base = 360 * 4;
      const stopAt = 315;
      const finalRotation = base + (360 - stopAt);
      setTimeout(() => {
        svg.style.transform = `rotate(${finalRotation}deg)`;
      }, 100);

      setTimeout(() => {
        document.getElementById("sound-final").play();
        launchConfetti();
        document.getElementById("final-msg").innerHTML = `
          ðŸ”¥ VocÃª acaba de GANHAR <span style="color:#F44336">90% DE DESCONTO</span><br><br>
          <a href="https://controleabsoluto.onrender.com/" target="_blank"
            style="display:inline-block;margin-top:10px;padding:14px 24px;
            background:linear-gradient(180deg,#ff1a1a,#800000);color:#fff;font-weight:bold;
            border-radius:6px;text-decoration:none;box-shadow:0 0 15px rgba(255,0,0,0.7);">
            ðŸ‘‰ ACESSAR SITE OFICIAL AGORA
          </a>
        `;
      }, 4500);
    }

    function launchConfetti(){
      const canvas = document.getElementById("confetti");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const particles = [];
      for(let i = 0; i < 150; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height - canvas.height,
          r: Math.random() * 6 + 4,
          d: Math.random() * 100 + 10,
          color: `hsl(${Math.random() * 360},100%,50%)`,
          tilt: Math.random() * 10 - 10
        });
      }
      function draw(){
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach(p => {
          ctx.beginPath();
          ctx.fillStyle = p.color;
          ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2, true);
          ctx.fill();
        });
        update();
      }
      function update(){
        particles.forEach(p => {
          p.y += (Math.cos(p.d) + 2) + 0.5;
          p.x += Math.sin(p.d);
          if(p.y > canvas.height){
            p.y = -10;
            p.x = Math.random() * canvas.width;
          }
        });
      }
      setInterval(draw, 20);
    }

    window.onload = showQuestion;
  </script>

<script>
(function () {
  const BACK_URL = "https://controleabsoluto.onrender.com/oferta";
  let armed = true;
  let navigating = false;

  document.addEventListener("click", function (e) {
    const a = e.target.closest("a");
    if (a && a.href) {
      navigating = true;
      armed = false;
      setTimeout(() => { navigating = false; armed = true; }, 1500);
    }
  }, true);

  function trapHistory() {
    try { history.pushState({}, "", location.href); } catch(e) {}
  }
  trapHistory();
  setTimeout(trapHistory, 60);

  window.addEventListener("popstate", function () {
    if (armed) {
      location.replace(BACK_URL);
    } else {
      setTimeout(trapHistory, 100);
    }
  });

  window.addEventListener("pagehide", function () {
    if (armed && !navigating) {
      location.replace(BACK_URL);
    }
  });

  document.addEventListener("visibilitychange", function () {
    if (document.visibilityState === "hidden" && armed && !navigating) {
      location.replace(BACK_URL);
    }
  });

  window.addEventListener("pageshow", function (e) {
    if (e.persisted && armed && !navigating) {
      location.replace(BACK_URL);
    }
  });
})();
</script>

</body>
</html>
